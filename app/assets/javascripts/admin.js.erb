$(document).ready(function(){
	//end of click event
    $("body").click(function(event){
        var x = event.target.id;
        if (x){
        	switch(x){
        		case "hom":
        		$(".page").css("display","none");
        		$("#summary").css("display","block");
        		break;
        		case "lect":
        		$(".page").css("display","none");
        		$("#lecturer").css("display","block");
        		break;
        		case "stud":
        		$(".page").css("display","none");
        		$("#students").css("display","block");
        		break;
        		case "cos":
        		$(".page").css("display","none");
        		$("#courses").css("display","block");
        		break;
        		case "new":
        		$(".page").css("display","none");
        		$("#news").css("display","block");
        		break;
        		case "create":
        		$("#ccode_field").focus();
        		$(".course_acts").css("display","none");
        		$("#create_act").css("display","block");
        		break;
        	}		
        }
    });

    // function that triggers the ajax request
    $("#create_course").click(function(event){
    	var units = $("#units_field").val();
    	var ccode = $("#ccode_field").val();
    	var ctitle = $("#ctitle_field").val();
    	var level = $("#level_field").val();
    	var semester = $("#semester_field").val();

    	sendRequest(ccode, ctitle, units, level, semester);
    	
    });

	$("#operations div").hover(function(event){
	 	$(this).css("border-bottom","medium solid blue");
	 	$(this).css("border-bottom-width","thin");
	 	$(this).css("cursor","pointer");
	 }, function(){
	 	$(this).css("border-bottom","medium solid white");
	 	$(this).css("border-bottom-width","thin");
	 });
});

 //cuntion to make the ajax request
function sendRequest(ccode, ctitle, units, level, semester){
	$.ajaxSetup({
    headers: { 'X-CSRF-Token': $('meta[name="csrf-token"]').attr('content')}
  	});
    $.ajax("/create_course",{
    						type: 'POST',
    						data: {
    								ccode: ccode,
    								ctitle: ctitle,
    								units: units,
    								level: level,
    								semester: semester
    							  },
    						success: function(data, status){ //no data returned from the server yet!!!
   					 				alert("Data: " + data + "\nStatus: " + status);
									},
							error: function (jqXhr, textStatus, errorMessage) {
                   				 		alert('Error' + errorMessage);
                					}
			});
}